# 가설 검정

suppose, test

### 카이제곱 검정

: 두 범주(category)형 변수가 서로 상관이 있는지 판단하는 통계적 검정 방법.

예) 학력, 성별, 직업의 만족도

## Child별 장난감 보유 현황

-   귀무가설: child1과 child2의 장난감 보유 수에 대한 만족도는 차이가 없다.(가설 세우기) \> 분석할 필요 없다.

-   대립가설: child1과 child2의 장난감 보유 수에 대한 만족도는 차이가 있다.(분석 가능)

-   대립가설-증명하고 싶은 가설 / 귀무가설 - 증명하고 싶은 가설의 반대되는 가설 (귀무가설이 아니라는 분석이 나와야됨)

```{r}
child1 <- c(5,11,1)
child2 <- c(4,7,3)
```

```{r}
Toy <- cbind(child1, child2)
Toy
```

```{r}
rownames(Toy) <- c('car', 'truck','doll')
Toy
```

## 카이제곱 검정을 실시

```{r}
chisq.test(Toy)
```

## 결론

p-value = 0.4219 \> 0.05 (95%신뢰구간) 귀무가설 채택

==\> child1과 child2의 데이터는 통계적으로 큰 차이가 없다.

> p-value는 0에 가까울수록 좋다. 미리 정해준 유의수준(일반적으로 0.05)보다 작으면 대립가설을 채택하고,
>
> 유의수준보다 크면 귀무가설을 채택한다.

Message: 카이제곱의 근사값이 정확하지 않을 수도 있다. \*근사값: 통계에서 나오는 모든 결과값 ---\> 데이터량이 적은 경우 발생

### 피셔검정 : 표본 수(데이터량)가 적거나(5) 데이터의 분포가 치우친 경우

```{r}
fisher.test(Toy)
```

상관계수 보기

```{r}
cor(child1, child2) # 0.9862.. 98%이므로 분석할 필요 없다.
```

# t-검정&Shapiro.test

### 건전지

\*소비자 보호원에서 많이 쓴다. 예) 과장광고

귀무가설 : 건전지의 수명은 1000시간 이다.

대립가설: 건전지의 수명은 1000시간이 아니다.

1)  데이터의 분포가 정규 분포 확인 -\> Shapiro-Wilk 검정

-   귀무가설: 자료가 정규분포를 따른다.

-   대립가설: 자료가 정규분포를 따르지 않는다.

\>\>귀무가설이면 t검정 시작

```{r}
bat <- c(980, 1008, 968, 1032, 1012, 1002, 996, 1017)
shapiro.test(bat)
```

p-value \> 0.05 -\> 귀무가설 -\> t검정 시작

```{r}
summary(bat)
```

p-value = 0.9469 \> 0.05 -\> 귀무가설 : 정규분포

```{r}
t.test(bat, mu=1000, alternative = 'two.sided')#two.sided 디폴트값 , # mu-주장하는 시간
```

mu : 비교하는 대상의 평균

alternative

-   two.sided : 데이터와 평균과 다르다.

-   greater: 데이터가 평균보다 크다.

-   less : 데이터가 평균보다 적다.

> p-value = 0.8032 \> 0.05 -\> 귀무가설 -\> 귀무가설 (건전지의 수명은 1000시간이다.)

### 수학점수

어떤 학습의 수학 점수 평균 : 55점

0교시 수업을 한 후에 학생들의 성적이 올랐을까?

귀무가설 : 성적이 오르지 않았다.

대립가설 : 성적이 올랐다.

```{r}
exam <- read.csv("./Data/exam.csv")
head(exam)
```

```{r}
a <- exam$score
shapiro.test(a)
```

0.1058 \> 0.05 -\> 귀무가설 : 정규분포

```{r}
mean(a)
```

```{r}
summary(a)
```

```{r}
boxplot(a)
```

```{r}
t.test(a, mu=55, alternative = "greater")
```

p-value = 0.4046 \> 0.05 -\>귀무가설: 성적은 오르지 않았다.

# 상관관계

```{r}
#y <- c(1, 2, 3, 4)  #0.9693631
y <- c(2, 1, 4, 3) #0.5013947
z <- c(0, 5, 7, 9)
cor(y, z)
```

#가습기 살균제: 데이터 조작한 것( y의 순서 바꾸듯이..)

```{r}
cor(y, z, method = 'pearson') #보통 쓰는 것, 디폴트
cor(y, z, method = 'spearman') #데이터 적을 때(기준?)

```

# 콜모고로프-스미노프 검정(KS Test)

:주어진 2개의 데이터가 같은 분포인가를 검정하는 방법

어디에 쓰이는가?

귀무가설: 두개의 데이터 분포가 다르다.

대립가설: 두개의 데이터 분포가 같다.

```{r}
x <- rnorm(50)
y <- runif(50)
ks.test(x, y)
```

p-value = 1.453e-07

= 0.0000001453

\>\> x, y 정규분포가 같다.

-two-sided : 중간 95% 구간에서 같은 정규분포를 보인다.(컵 곡선 그래프)

# 부호검정

:2개의 데이터 사이에 차이가 있는지 검정하는 것

귀무가설 : 유의한 차이가 없다.

대립가설 : 유의한 차이가 있다.

식사전과 식사후의 음료수 맛에 대한 평가

```{r}
x <- c(4, 1, 1, 4, 3, 3, 2, 5, 3, 3)
y <- c(1, 1, 3, 2, 5, 1, 4, 4, 3, 1)
```

```{r}
binom.test(c(length(x[x>y]), length(x[x<y])))
```

-음료수는 차이가 없어야 된다 . p-value\>0.05 -\>귀무가설이어야 된다.

-숙취해소제는 차이가 있어야 된다. p-value \< 0.05 -\>대립가설 이어야 된다.

# 비율 검정

:2개의 데이터 사이에 비율의 차이가 있는지에 대한것을 검정

맥주를 좋아하시나요? 라는 질문에 서울에서는 400명중 360명, 부산에서는 200명중 136명이 좋다고 답했다면

둘의 비율 차이가 있다고 할 수 있는가?

귀무가설 : 유의한 차이가 없다.

대립가설 : 유의한 차이가 있다.

```{r}
hite <- c(360, 136)
sample <- c(400, 200)
prop.test(hite, sample)
```
